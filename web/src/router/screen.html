<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Real-Time Image Rendering</title>
</head>
<style>
    #outputImage {
        width: 400px; /* Adjust as needed */
        height: 800px; /* Adjust as needed */
    }
</style>
<body>
<img id="outputImage" alt="Output Image">
<script>
    function getWebSocketPort() {
        const queryParams = new URLSearchParams(window.location.search);
        return queryParams.get('port'); // Default port is 8002
    }

    // Create WebSocket URL with the extracted port
    const wsPort = getWebSocketPort();
    const wsUrl = `ws://localhost:${wsPort}`;
    const ws = new WebSocket(wsUrl);

    ws.onmessage = (event) => {
        console.log(event)
        const blob = event.data;
        const url = URL.createObjectURL(blob);

        // Set the Blob URL as the image source
        document.getElementById('outputImage').src = url;
    };
</script>
</body>
</html>