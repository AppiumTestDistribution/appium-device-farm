datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

model Build {
  id        String    @id @default(uuid())
  name      String?
  sessions  Session[]
  createdAt DateTime  @default(now())
  updatedAt DateTime  @updatedAt
}

model Session {
  id                   String       @id
  buildId             String?
  build                Build?       @relation(fields: [buildId], references: [id])
  name                 String?
  status               String       @default("running")
  desiredCapabilities String
  sessionCapabilities String
  nodeId              String
  hasLiveVideo       Boolean
  videoRecording      String?
  startTime            DateTime     @default(now())
  endTime              DateTime?
  failureReason       String?
  //device properties
  deviceUDID          String
  devicePlatform      String
  deviceVersion       String
  deviceName          String?
  // Timestamps
  createdAt            DateTime     @default(now())
  updatedAt            DateTime     @updatedAt
  SessionLog           SessionLog[]
}

model SessionLog {
  id           String   @id @default(uuid())
  session_id   String
  session      Session  @relation(fields: [session_id], references: [id])
  commandName String?
  url          String
  method       String
  title        String
  subtitle     String?
  body         String?
  response     String
  screenshot   String?
  isSuccess   Boolean?
  // Timestamps
  createdAt    DateTime @default(now())
  updatedAt    DateTime @updatedAt
}
